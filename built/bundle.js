!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(1),n=(console.log,new r.default);document.body.appendChild(n),window.onload=(()=>{n.showAllTabs()}),chrome.commands.onCommand.addListener(e=>{"close-tab"===e&&n.closeTab()})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});console.log;const r=o(2),n=o(3),i=o(4),s={shouldSort:!0,includeScore:!0,includeMatches:!0,minMatchCharLength:1,threshold:.35,maxPatternLength:32,keys:["title","url"]};class a extends HTMLElement{constructor(){super(),this.userInput="",this.root=this.attachShadow({mode:"open"}),this.searchbox=document.createElement("input"),this.searchbox.className="searchbox",this.searchbox.autofocus=!0,this.searchbox.tabIndex=1,this.searchbox.oninput=(e=>{this.userInput!==this.searchbox.value&&(this.clear(),""===this.searchbox.value?this.showAllTabs():(window.clearTimeout(this.timerID),this.timerID=window.setTimeout(this.search.bind(this),300)),this.userInput=this.searchbox.value)}),this.searchbox.onkeydown=(e=>{if(!e.isComposing){if("Tab"===e.key)return e.shiftKey?this.focusUp():this.focusDown(),!1;if("ArrowUp"===e.key)return this.focusUp(),!1;if("ArrowDown"===e.key)return this.focusDown(),!1;"Enter"===e.key&&this.open()}}),this.root.appendChild(this.searchbox),this.view=document.createElement("ul"),this.root.appendChild(this.view),this.hit=new i.default;const e=document.createElement("style");e.textContent="@import url('css/hits.css');",this.root.appendChild(e),window.onload=(()=>{})}search(){chrome.tabs.query({},e=>{let t=e;chrome.history.search({text:"",maxResults:20},e=>{t=r.deduplicate(t,e),chrome.bookmarks.getTree(e=>{const o=r.treeToFlatList(e[0]);t=r.deduplicate(t,o);const i=new n(t,s).search(this.searchbox.value);this.updateView(i)})})})}showAllTabs(){chrome.tabs.query({},e=>{e.forEach((e,t)=>{const o=this.makeNewHit(e);this.view.appendChild(o)})})}updateView(e){e.forEach((e,t)=>{const o=this.makeNewHit(e.item);this.view.appendChild(o)})}makeNewHit(e){const t=this.hit.cloneNode(!0);return t.setContents(e),t}clear(){for(;this.view.firstChild;)this.view.removeChild(this.view.firstChild)}open(){const e=this.getHits();let t=!0;e.forEach(e=>{e.focused&&(e.openPage(),t=!1)}),t&&chrome.tabs.create({url:`https://www.google.com/search?q=${this.searchbox.value}`})}closeTab(){const e=this.getFocusedHit();e&&e.closeTab()}getHits(){return[...this.view.children]}getFocusedHit(){const e=this.getHits();for(let t of e)if(t.focused)return t;return!1}focusDown(){const e=this.getFocusedHit();e?e.nextSibling?(e.blur(),e.nextSibling.focus()):(e.blur(),this.view.firstChild.focus()):this.view.firstChild.focus()}focusUp(){const e=this.getFocusedHit();e?e.previousSibling?(e.blur(),e.previousSibling.focus()):(e.blur(),this.view.lastChild.focus()):this.view.lastChild.focus()}setPlaceHolder(e){this.searchbox.placeholder=e.name.innerText}}t.default=a,customElements.define("suggest-view",a)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deduplicate=function(e,t){return t.forEach(t=>{let o=!0;e.forEach(e=>{e.url!==t.url||(o=!1)}),o&&e.push(t)}),e},t.treeToFlatList=function(e){return function e(t,o){if(t.url)o.push(t);else if(t.children)for(let r=0;r<t.children.length;r++)e(t.children[r],o);return o}(e,[])}},function(e,t,o){
/*!
 * Fuse.js v3.4.4 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */
e.exports=function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t){e.exports=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=o(2),s=o(8),a=o(0),c=function(){function e(t,o){var r=o.location,n=void 0===r?0:r,i=o.distance,a=void 0===i?100:i,c=o.threshold,h=void 0===c?.6:c,l=o.maxPatternLength,u=void 0===l?32:l,d=o.caseSensitive,p=void 0!==d&&d,f=o.tokenSeparator,v=void 0===f?/ +/g:f,m=o.findAllMatches,g=void 0!==m&&m,y=o.minMatchCharLength,b=void 0===y?1:y,w=o.id,x=void 0===w?null:w,k=o.keys,S=void 0===k?[]:k,_=o.shouldSort,M=void 0===_||_,C=o.getFn,T=void 0===C?s:C,L=o.sortFn,I=void 0===L?function(e,t){return e.score-t.score}:L,O=o.tokenize,P=void 0!==O&&O,A=o.matchAllTokens,E=void 0!==A&&A,j=o.includeMatches,H=void 0!==j&&j,F=o.includeScore,N=void 0!==F&&F,z=o.verbose,D=void 0!==z&&z;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:n,distance:a,threshold:h,maxPatternLength:u,isCaseSensitive:p,tokenSeparator:v,findAllMatches:g,minMatchCharLength:b,id:x,keys:S,includeMatches:H,includeScore:N,shouldSort:M,getFn:T,sortFn:I,verbose:D,tokenize:P,matchAllTokens:E},this.setCollection(t)}var t,o;return t=e,(o=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var o=this._prepareSearchers(e),r=o.tokenSearchers,n=o.fullSearcher,i=this._search(r,n),s=i.weights,a=i.results;return this._computeScore(s,a),this.options.shouldSort&&this._sort(a),t.limit&&"number"==typeof t.limit&&(a=a.slice(0,t.limit)),this._format(a)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var o=e.split(this.options.tokenSeparator),r=0,n=o.length;r<n;r+=1)t.push(new i(o[r],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,o=this.list,r={},n=[];if("string"==typeof o[0]){for(var i=0,s=o.length;i<s;i+=1)this._analyze({key:"",value:o[i],record:i,index:i},{resultMap:r,results:n,tokenSearchers:e,fullSearcher:t});return{weights:null,results:n}}for(var a={},c=0,h=o.length;c<h;c+=1)for(var l=o[c],u=0,d=this.options.keys.length;u<d;u+=1){var p=this.options.keys[u];if("string"!=typeof p){if(a[p.name]={weight:1-p.weight||1},p.weight<=0||p.weight>1)throw new Error("Key weight has to be > 0 and <= 1");p=p.name}else a[p]={weight:1};this._analyze({key:p,value:this.options.getFn(l,p),record:l,index:c},{resultMap:r,results:n,tokenSearchers:e,fullSearcher:t})}return{weights:a,results:n}}},{key:"_analyze",value:function(e,t){var o=e.key,r=e.arrayIndex,n=void 0===r?-1:r,i=e.value,s=e.record,c=e.index,h=t.tokenSearchers,l=void 0===h?[]:h,u=t.fullSearcher,d=void 0===u?[]:u,p=t.resultMap,f=void 0===p?{}:p,v=t.results,m=void 0===v?[]:v;if(null!=i){var g=!1,y=-1,b=0;if("string"==typeof i){this._log("\nKey: ".concat(""===o?"-":o));var w=d.search(i);if(this._log('Full text: "'.concat(i,'", score: ').concat(w.score)),this.options.tokenize){for(var x=i.split(this.options.tokenSeparator),k=[],S=0;S<l.length;S+=1){var _=l[S];this._log('\nPattern: "'.concat(_.pattern,'"'));for(var M=!1,C=0;C<x.length;C+=1){var T=x[C],L=_.search(T),I={};L.isMatch?(I[T]=L.score,g=!0,M=!0,k.push(L.score)):(I[T]=1,this.options.matchAllTokens||k.push(1)),this._log('Token: "'.concat(T,'", score: ').concat(I[T]))}M&&(b+=1)}y=k[0];for(var O=k.length,P=1;P<O;P+=1)y+=k[P];y/=O,this._log("Token score average:",y)}var A=w.score;y>-1&&(A=(A+y)/2),this._log("Score average:",A);var E=!this.options.tokenize||!this.options.matchAllTokens||b>=l.length;if(this._log("\nCheck Matches: ".concat(E)),(g||w.isMatch)&&E){var j=f[c];j?j.output.push({key:o,arrayIndex:n,value:i,score:A,matchedIndices:w.matchedIndices}):(f[c]={item:s,output:[{key:o,arrayIndex:n,value:i,score:A,matchedIndices:w.matchedIndices}]},m.push(f[c]))}}else if(a(i))for(var H=0,F=i.length;H<F;H+=1)this._analyze({key:o,arrayIndex:H,value:i[H],record:s,index:c},{resultMap:f,results:m,tokenSearchers:l,fullSearcher:d})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var o=0,r=t.length;o<r;o+=1){for(var n=t[o].output,i=n.length,s=1,a=1,c=0;c<i;c+=1){var h=e?e[n[c].key].weight:1,l=(1===h?n[c].score:n[c].score||.001)*h;1!==h?a=Math.min(a,l):(n[c].nScore=l,s*=l)}t[o].score=1===a?s:a,this._log(t[o])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var o=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,function(e,t){if("object"===r(t)&&null!==t){if(-1!==o.indexOf(t))return;o.push(t)}return t})),o=null}var n=[];this.options.includeMatches&&n.push(function(e,t){var o=e.output;t.matches=[];for(var r=0,n=o.length;r<n;r+=1){var i=o[r];if(0!==i.matchedIndices.length){var s={indices:i.matchedIndices,value:i.value};i.key&&(s.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(s.arrayIndex=i.arrayIndex),t.matches.push(s)}}}),this.options.includeScore&&n.push(function(e,t){t.score=e.score});for(var i=0,s=e.length;i<s;i+=1){var a=e[i];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),n.length){for(var c={item:a.item},h=0,l=n.length;h<l;h+=1)n[h](a,c);t.push(c)}else t.push(a.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&n(t.prototype,o),e}();e.exports=c},function(e,t,o){function r(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=o(3),i=o(4),s=o(7),a=function(){function e(t,o){var r=o.location,n=void 0===r?0:r,i=o.distance,a=void 0===i?100:i,c=o.threshold,h=void 0===c?.6:c,l=o.maxPatternLength,u=void 0===l?32:l,d=o.isCaseSensitive,p=void 0!==d&&d,f=o.tokenSeparator,v=void 0===f?/ +/g:f,m=o.findAllMatches,g=void 0!==m&&m,y=o.minMatchCharLength,b=void 0===y?1:y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:n,distance:a,threshold:h,maxPatternLength:u,isCaseSensitive:p,tokenSeparator:v,findAllMatches:g,minMatchCharLength:b},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=s(this.pattern))}var t,o;return t=e,(o=[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,o=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>o)return n(e,this.pattern,r);var s=this.options,a=s.location,c=s.distance,h=s.threshold,l=s.findAllMatches,u=s.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:a,distance:c,threshold:h,findAllMatches:l,minMatchCharLength:u})}}])&&r(t.prototype,o),e}();e.exports=a},function(e,t){var o=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,n=new RegExp(t.replace(o,"\\$&").replace(r,"|")),i=e.match(n),s=!!i,a=[];if(s)for(var c=0,h=i.length;c<h;c+=1){var l=i[c];a.push([e.indexOf(l),l.length-1])}return{score:s?.5:1,isMatch:s,matchedIndices:a}}},function(e,t,o){var r=o(5),n=o(6);e.exports=function(e,t,o,i){for(var s=i.location,a=void 0===s?0:s,c=i.distance,h=void 0===c?100:c,l=i.threshold,u=void 0===l?.6:l,d=i.findAllMatches,p=void 0!==d&&d,f=i.minMatchCharLength,v=void 0===f?1:f,m=a,g=e.length,y=u,b=e.indexOf(t,m),w=t.length,x=[],k=0;k<g;k+=1)x[k]=0;if(-1!==b){var S=r(t,{errors:0,currentLocation:b,expectedLocation:m,distance:h});if(y=Math.min(S,y),-1!==(b=e.lastIndexOf(t,m+w))){var _=r(t,{errors:0,currentLocation:b,expectedLocation:m,distance:h});y=Math.min(_,y)}}b=-1;for(var M=[],C=1,T=w+g,L=1<<w-1,I=0;I<w;I+=1){for(var O=0,P=T;O<P;)r(t,{errors:I,currentLocation:m+P,expectedLocation:m,distance:h})<=y?O=P:T=P,P=Math.floor((T-O)/2+O);T=P;var A=Math.max(1,m-P+1),E=p?g:Math.min(m+P,g)+w,j=Array(E+2);j[E+1]=(1<<I)-1;for(var H=E;H>=A;H-=1){var F=H-1,N=o[e.charAt(F)];if(N&&(x[F]=1),j[H]=(j[H+1]<<1|1)&N,0!==I&&(j[H]|=(M[H+1]|M[H])<<1|1|M[H+1]),j[H]&L&&(C=r(t,{errors:I,currentLocation:F,expectedLocation:m,distance:h}))<=y){if(y=C,(b=F)<=m)break;A=Math.max(1,2*m-b)}}if(r(t,{errors:I+1,currentLocation:m,expectedLocation:m,distance:h})>y)break;M=j}return{isMatch:b>=0,score:0===C?.001:C,matchedIndices:n(x,v)}}},function(e,t){e.exports=function(e,t){var o=t.errors,r=void 0===o?0:o,n=t.currentLocation,i=void 0===n?0:n,s=t.expectedLocation,a=void 0===s?0:s,c=t.distance,h=void 0===c?100:c,l=r/e.length,u=Math.abs(a-i);return h?l+u/h:u?1:l}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=[],r=-1,n=-1,i=0,s=e.length;i<s;i+=1){var a=e[i];a&&-1===r?r=i:a||-1===r||((n=i-1)-r+1>=t&&o.push([r,n]),r=-1)}return e[i-1]&&i-r>=t&&o.push([r,i-1]),o}},function(e,t){e.exports=function(e){for(var t={},o=e.length,r=0;r<o;r+=1)t[e.charAt(r)]=0;for(var n=0;n<o;n+=1)t[e.charAt(n)]|=1<<o-n-1;return t}},function(e,t,o){var r=o(0);e.exports=function(e,t){return function e(t,o,n){if(o){var i=o.indexOf("."),s=o,a=null;-1!==i&&(s=o.slice(0,i),a=o.slice(i+1));var c=t[s];if(null!=c)if(a||"string"!=typeof c&&"number"!=typeof c)if(r(c))for(var h=0,l=c.length;h<l;h+=1)e(c[h],a,n);else a&&e(c,a,n);else n.push(c.toString())}else n.push(t);return n}(e,t,[])}}])},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=o(5);console.log;class n extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.wrapper=document.createElement("div"),this.wrapper.className="wrapper",this.icon=document.createElement("img"),this.icon.width=20,this.icon.height=20,this.name=document.createElement("div"),this.url=document.createElement("div");const e=document.createElement("div");e.className="card__data",e.appendChild(this.name),e.appendChild(this.url),this.wrapper.appendChild(this.icon),this.wrapper.appendChild(e),this.wrapper.addEventListener("click",this.openPage.bind(this));const t=document.createElement("style");t.textContent="@import url('css/hit.css');",this.shadow.appendChild(t),this.shadow.appendChild(this.wrapper),this.addEventListener("keydown",e=>{"Enter"===e.key&&this.openPage()})}setContents(e){if(this.itemID="string"==typeof e.id?parseInt(e.id):e.id,this.name.innerText=e.title,this.url.innerText=decodeURI(e.url),r.isTab(e)){this.type="tab",this.icon.src=e.favIconUrl;const t=document.createElement("button");t.className="card__close",t.innerText="close",t.addEventListener("click",this.closeTab.bind(this)),this.wrapper.appendChild(t)}else r.isHistoryItem(e)?(this.type="history",this.icon.src="./img/history.svg"):r.isBookmarkTreeNode(e)&&(this.type="bookmark",this.icon.src="./img/bookmark.svg")}openPage(){"tab"===this.type?chrome.tabs.update(this.itemID,{active:!0},e=>{chrome.windows.update(e.windowId,{focused:!0})}):"bookmark"===this.type?this.openTab():"history"===this.type&&this.openTab()}openTab(){chrome.tabs.create({url:this.url.innerText})}closeTab(){chrome.tabs.remove(this.itemID),this.parentNode.removeChild(this)}update(e={focused:!1}){this.focused!==e.focused&&(this.focused=e.focused),this.updateStyle()}updateStyle(){this.focused?this.wrapper.className+="-focused":this.wrapper.className="wrapper"}focus(){this.update({focused:!0}),this.scrollIntoView({behavior:"smooth",block:"nearest"})}blur(){this.update({focused:!1})}}t.default=n,customElements.define("hit-view",n)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTab=function(e){return void 0!==e.active},t.isHistoryItem=function(e){return void 0!==e.visitCount},t.isBookmarkTreeNode=function(e){return void 0!==e.dateAdded}}]);
//# sourceMappingURL=bundle.js.map