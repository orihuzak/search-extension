!function(e){var t={};function s(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(i,o,function(t){return e[t]}.bind(null,o));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new(s(1).default);document.body.appendChild(i)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});console.log;const i=s(2);class o extends HTMLElement{constructor(){super(),this.userInput="",this.root=this.attachShadow({mode:"open"}),this.searchbox=document.createElement("input"),this.searchbox.className="searchbox",this.searchbox.oninput=e=>{this.userInput!==this.searchbox.value&&(this.clear(),""===this.searchbox.value?(window.clearTimeout(this.timerID),this.showAllTabs()):(window.clearTimeout(this.timerID),this.timerID=window.setTimeout(this.search.bind(this),300)),this.userInput=this.searchbox.value)},this.searchbox.onkeydown=e=>{if(!e.isComposing){if("Tab"===e.key)return e.shiftKey?this.focusUp():this.focusDown(),!1;if("ArrowUp"===e.key)return this.focusUp(),!1;if("ArrowDown"===e.key)return this.focusDown(),!1;"Enter"===e.key&&this.open()}},this.root.appendChild(this.searchbox),this.view=document.createElement("div"),this.view.className="view",this.root.appendChild(this.view),this.hit=new i.default;const e=document.createElement("style");e.textContent="@import url('css/hits.css');",this.root.appendChild(e),window.onload=()=>{this.searchbox.focus();const e=this.searchbox.getBoundingClientRect();this.view.style.paddingTop=e.bottom+"px",this.view.style.top=e.bottom+"px",this.showAllTabs()}}search(){chrome.runtime.sendMessage({searchWord:this.searchbox.value},e=>{this.updateView(e.searchResult)})}showAllTabs(){chrome.runtime.sendMessage({defaultSuggests:!0},e=>{e.defaultSuggests.forEach((e,t)=>{const s=this.makeNewHit(e);this.view.appendChild(s)})})}updateView(e){e.forEach((e,t)=>{const s=this.makeNewHit(e.item);this.view.appendChild(s)})}makeNewHit(e){const t=this.hit.cloneNode(!0);return t.setContents(e),t}clear(){for(;this.view.firstChild;)this.view.removeChild(this.view.firstChild)}open(){const e=this.getHits();let t=!0;e.forEach(e=>{e.focused&&(e.openPage(),t=!1)}),t&&chrome.tabs.create({url:`https://www.google.com/search?q=${this.searchbox.value}`})}closeTab(){const e=this.getFocusedHit();e&&e.closeTab()}getHits(){return[...this.view.children]}getFocusedHit(){const e=this.getHits();for(let t of e)if(t.focused)return t;return!1}moveFocus(e){const t=this.getFocusedHit();if(t){t.blur();const s=e?t.nextSibling:t.previousSibling;if(s){const e=s;e.focus(),this.setPlaceHolder(e)}else{const t=e?this.view.firstChild:this.view.lastChild;t.focus(),this.setPlaceHolder(t)}}else{const t=e?this.view.firstChild:this.view.lastChild;t.focus(),this.setPlaceHolder(t)}}focusDown(){this.moveFocus(!0)}focusUp(){this.moveFocus(!1)}setPlaceHolder(e){this.searchbox.placeholder=e.name.innerText}}t.default=o,customElements.define("suggest-view",o)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(3),o=(console.log,"card"),r="card--focused",n="card__icon",c="card__dataWrapper",h="card__title",a="card__close";class d extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.wrapper=document.createElement("div"),this.wrapper.className=o,this.icon=document.createElement("img"),this.icon.className=n,this.icon.width=20,this.icon.height=20;const e=document.createElement("div");e.className=c,this.name=document.createElement("div"),this.name.className=h,this.url=document.createElement("div"),e.appendChild(this.name),e.appendChild(this.url),this.wrapper.appendChild(this.icon),this.wrapper.appendChild(e),this.wrapper.addEventListener("click",this.openPage.bind(this));const t=document.createElement("style");t.textContent="@import url('css/hit.css');",this.shadow.appendChild(t),this.shadow.appendChild(this.wrapper),this.addEventListener("keydown",e=>{"Enter"===e.key&&this.openPage()})}setContents(e){this.itemID="string"==typeof e.id?parseInt(e.id):e.id,this.name.innerText=e.title;try{this.url.innerText=decodeURI(e.url)}catch(t){this.url.innerText=e.url}if(i.isTab(e)){this.itemType="tab",this.icon.src=e.favIconUrl;const t=document.createElement("button");t.className=a,t.innerText="Ã—",t.addEventListener("click",this.closeTab.bind(this)),this.wrapper.appendChild(t)}else i.isHistoryItem(e)?(this.itemType="history",this.icon.src="./img/history.svg"):i.isBookmarkTreeNode(e)&&(this.itemType="bookmark",this.icon.src="./img/bookmark.svg")}openPage(){"tab"===this.itemType?chrome.tabs.update(this.itemID,{active:!0},e=>{chrome.windows.update(e.windowId,{focused:!0})}):"bookmark"===this.itemType?this.openTab():"history"===this.itemType&&this.openTab()}openTab(){chrome.tabs.create({url:this.url.innerText})}closeTab(){chrome.tabs.remove(this.itemID),this.parentNode.removeChild(this)}update(e={focused:!1}){this.focused!==e.focused&&(this.focused=e.focused),this.updateStyle()}updateStyle(){this.focused?this.wrapper.className=r:this.wrapper.className=o}focus(){this.update({focused:!0}),this.parentNode.firstChild===this?window.scrollTo({top:0,behavior:"smooth"}):this.scrollIntoView({behavior:"smooth",block:"nearest"})}blur(){this.update({focused:!1})}}t.default=d,customElements.define("hit-view",d)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTab=function(e){return void 0!==e.active},t.isHistoryItem=function(e){return void 0!==e.visitCount},t.isBookmarkTreeNode=function(e){return void 0!==e.dateAdded}}]);
//# sourceMappingURL=view.js.map